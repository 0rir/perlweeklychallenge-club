#! /usr/bin/env raku

unit sub MAIN (Int $N where $N > 0, :v(:$verbose));

my $lower = (1 ~ 0 x ($N -1)).Int;
my $upper = (9 x $N).Int;

say ": Range: $lower - $upper" if $verbose;

($lower .. $upper).hyper.grep( *.&is-rare )>>.say;

sub is-rare ($number)
{
  my $reverse  = $number.flip.Int;

  my $add      = $number + $reverse;
  return False if $add < 0;

  my $subtract = $number - $reverse;
  return False if $subtract < 0;

  my $add-sqrt = $add.sqrt;

  if $add-sqrt.Int == $add-sqrt
  { 
    my $sub-sqrt = $subtract.sqrt;
    return $sub-sqrt.Int == $sub-sqrt;
  }
}
